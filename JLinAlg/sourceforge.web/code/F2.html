<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<!--
Syntax highlighting generated by Web C Plus Plus software v0.8.4
Webcpp Copyright (C)2001-2004 Jeffrey Bakker under the GNU GPL
Get webcpp at http://webcpp.sf.net
-->

<html>
<head>
<title>F2.java</title>
<link rel="stylesheet" type="text/css" href="jlinalg.css"/>
</head>
<body>

<div class="webcpp">
<pre>

<font CLASS=comment>/*
 * This file is part of JLinAlg (&lt;http://jlinalg.sourceforge.net/&gt;).
 * 
 * JLinAlg is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as
 * published by the Free Software Foundation, either version 3 of
 * the License, or (at your option) any later version.
 * 
 * JLinAlg is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU Lesser General Public
 * License along with JLinALg. If not, see &lt;http://www.gnu.org/licenses/&gt;.
 */</font>
<font CLASS=keyword>package</font> org.jlinalg.f2;

<font CLASS=keyword>import</font> org.jlinalg.DivisionByZeroException;
<font CLASS=keyword>import</font> org.jlinalg.FieldElement;
<font CLASS=keyword>import</font> org.jlinalg.IRingElementFactory;
<font CLASS=keyword>import</font> org.jlinalg.InvalidOperationException;
<font CLASS=keyword>import</font> org.jlinalg.JLinAlgTypeProperties;
<font CLASS=keyword>import</font> org.jlinalg.RingElementFactory;

<font CLASS=comment>/**
 * This class represents an element of the modulo 2 field F2. F2 is a field,
 * just like the rational numbers are. At first glance it seems to be a rather
 * academic example, but prime fields (especially F2) have numerous applications
 * (e.g.: error correcting codes).
 * 
 * @author Andreas Keilhauer, Georg Thimm
 */</font>
<font CLASS=keyword>public</font> <font CLASS=keyword>class</font> F2
		<font CLASS=keyword>extends</font>
		FieldElement&lt;F2&gt;
{
	<font CLASS=comment>/**
	 * 
	 */</font>
	<font CLASS=keyword>private</font> <font CLASS=keytype>static</font> <font CLASS=keyword>final</font> <font CLASS=keytype>long</font> serialVersionUID <font CLASS=symbols>=</font> 1L;

	<font CLASS=comment>/**
	 * Builds an element in F2.
	 * &lt;P&gt;
	 * This should exclusively be used to create the instances {@link #ONE} and
	 * {@link #ZERO}. No internal value is needed as only these two instances
	 * are created and used.
	 */</font>
	<font CLASS=keyword>private</font> F2()
	{
	}

	<font CLASS=comment>/**
	 * Calculates the sum of this element and another one.
	 * 
	 * @param val
	 *            a F2-value
	 * @return sum &amp;lt;=&amp;gt; logical XOR
	 * @exception InvalidOperationException
	 *                if val is not in {{@link #ONE},{@link #ZERO} .
	 */</font>
	@Override
	<font CLASS=keyword>public</font> F2 add(F2 val)
	{
		<font CLASS=keyword>if</font> (<font CLASS=symbols>!</font>(val <font CLASS=symbols>==</font> ZERO || val == ONE)) <font CLASS=keyword>throw</font> <font CLASS=keyword>new</font> InvalidOperationException(
				<font CLASS=dblquot>"illegal argument "</font> <font CLASS=symbols>+</font> val <font CLASS=symbols>+</font> <font CLASS=dblquot>"."</font>);
		<font CLASS=keyword>if</font> (val <font CLASS=symbols>==</font> <font CLASS=keyword>this</font>) <font CLASS=keyword>return</font> ZERO;
		<font CLASS=keyword>return</font> ONE;
	}

	<font CLASS=comment>/**
	 * Calculates the difference between this element and another one.
	 * 
	 * @param val
	 *            a F2-value
	 * @return difference &amp;lt;=&amp;gt; logical XOR
	 * @exception InvalidOperationException
	 *                if val is not in {{@link #ONE},{@link #ZERO} .
	 */</font>
	@Override
	<font CLASS=keyword>public</font> F2 subtract(F2 val)
	{
		<font CLASS=keyword>return</font> add(val);
	}

	<font CLASS=comment>/**
	 * Calculates the product of this element and another one.
	 * 
	 * @param val
	 * @return product &amp;lt;=&amp;gt; logical AND
	 * @exception InvalidOperationException
	 *                if val is not in {{@link #ONE},{@link #ZERO} .
	 */</font>
	@Override
	<font CLASS=keyword>public</font> F2 multiply(F2 val)
	{
		<font CLASS=keyword>if</font> (val <font CLASS=symbols>==</font> ONE &amp;&amp; <font CLASS=keyword>this</font> <font CLASS=symbols>==</font> ONE) <font CLASS=keyword>return</font> ONE;
		<font CLASS=keyword>return</font> ZERO;
	}

	<font CLASS=comment>/**
	 * Calculates the quotient of this FieldElement and another one.
	 * 
	 * @param val
	 * @return quotient &amp;lt;=&amp;gt; this value if val = 1m2 and undefined
	 *         (Exception)
	 *         otherwise
	 * @exception InvalidOperationException
	 *                if val == 0m2
	 * @exception InvalidOperationException
	 *                if val is not in {{@link #ONE},{@link #ZERO} .
	 */</font>
	@Override
	<font CLASS=keyword>public</font> F2 divide(F2 val)
	{
		<font CLASS=keyword>if</font> (<font CLASS=symbols>!</font>(val <font CLASS=symbols>==</font> ZERO || val == ONE)) <font CLASS=keyword>throw</font> <font CLASS=keyword>new</font> InvalidOperationException(
				<font CLASS=dblquot>"illegal argument "</font> <font CLASS=symbols>+</font> val <font CLASS=symbols>+</font> <font CLASS=dblquot>"."</font>);
		<font CLASS=keyword>if</font> (val <font CLASS=symbols>==</font> ONE) {
			<font CLASS=keyword>return</font> <font CLASS=keyword>this</font>;
		}
		<font CLASS=keyword>throw</font> <font CLASS=keyword>new</font> InvalidOperationException(<font CLASS=dblquot>"Division by 0m2"</font>);
	}

	<font CLASS=comment>/**
	 * Calculates the inverse element of addition for this element. This is
	 * incidentally for F2 &lt;code&gt;this&lt;/code&gt;.
	 * 
	 * @return negated &amp;lt;=&amp;gt; this value
	 */</font>
	@Override
	<font CLASS=keyword>public</font> F2 negate()
	{
		<font CLASS=keyword>return</font> <font CLASS=keyword>this</font>;
	}

	<font CLASS=comment>/**
	 * Calculates the inverse element of multiplication for this element.
	 * 
	 * @return ONE if &lt;code&gt;this=={@link #ONE}&lt;/code&gt; .
	 * @throws DivisionByZeroException
	 *             if &lt;code&gt;this=={@link #ZERO}&lt;/code&gt; .
	 */</font>
	@Override
	<font CLASS=keyword>public</font> F2 invert() <font CLASS=keyword>throws</font> DivisionByZeroException
	{
		<font CLASS=keyword>if</font> (<font CLASS=keyword>this</font> <font CLASS=symbols>==</font> ZERO) {
			<font CLASS=keyword>throw</font> <font CLASS=keyword>new</font> DivisionByZeroException(<font CLASS=dblquot>"Tried to invert zero."</font>);
		}
		<font CLASS=keyword>return</font> ONE;
	}

	<font CLASS=comment>/**
	 * Checks two elements for equality.
	 * 
	 * @param val
	 * @return true if the two FieldElements are mathematically equal.
	 */</font>
	@Override
	<font CLASS=keyword>public</font> <font CLASS=keytype>boolean</font> equals(Object val)
	{
		<font CLASS=comment>// it is sufficient to examine the objects for identity as only instance</font>
		<font CLASS=comment>// for each value can exists</font>
		<font CLASS=keyword>return</font> <font CLASS=keyword>this</font> <font CLASS=symbols>==</font> val;
	}

	<font CLASS=comment>/**
	 * Returns a String representation of this element.
	 * 
	 * @return &lt;code&gt;0m2&lt;/code&gt; or &lt;code&gt;1m2&lt;/code&gt;.
	 */</font>
	@Override
	<font CLASS=keyword>public</font> String toString()
	{
		<font CLASS=keyword>if</font> (<font CLASS=keyword>this</font> <font CLASS=symbols>==</font> ZERO) <font CLASS=keyword>return</font> <font CLASS=dblquot>"0m2"</font>;
		<font CLASS=keyword>return</font> <font CLASS=dblquot>"1m2"</font>;
	}

	<font CLASS=comment>/**
	 * Implements Comparable.compareTo(Object).
	 * 
	 * @param val
	 *            the object
	 * @return one of {-1,+,0} as this object is less than, equal to, or greater
	 *         than the specified object.
	 * @exception InvalidOperationException
	 *                if val is not in {{@link #ONE},{@link #ZERO}.
	 */</font>
	@Override
	<font CLASS=keyword>public</font> <font CLASS=keytype>int</font> compareTo(F2 val)
	{
		<font CLASS=keyword>if</font> (<font CLASS=symbols>!</font>(val <font CLASS=symbols>==</font> ZERO || val == ONE)) <font CLASS=keyword>throw</font> <font CLASS=keyword>new</font> InvalidOperationException(
				<font CLASS=dblquot>"illegal argument "</font> <font CLASS=symbols>+</font> val <font CLASS=symbols>+</font> <font CLASS=dblquot>"."</font>);
		<font CLASS=keyword>if</font> (<font CLASS=keyword>this</font> <font CLASS=symbols>==</font> val) <font CLASS=keyword>return</font> <font CLASS=integer>0</font>;
		<font CLASS=keyword>if</font> (<font CLASS=keyword>this</font> <font CLASS=symbols>==</font> ZERO) <font CLASS=keyword>return</font> <font CLASS=symbols>-</font><font CLASS=integer>1</font>;
		<font CLASS=keyword>return</font> <font CLASS=integer>1</font>;
	}

	<font CLASS=comment>/**
	 * @return 0 or 1.
	 * @see java.lang.Object#hashCode()
	 */</font>
	@Override
	<font CLASS=keyword>public</font> <font CLASS=keytype>int</font> hashCode()
	{
		<font CLASS=keyword>return</font> <font CLASS=keyword>this</font> <font CLASS=symbols>==</font> ZERO ? <font CLASS=integer>0</font> : <font CLASS=integer>1</font>;
	}

	<font CLASS=comment>/**
	 * @return a reference to the singleton factory for this type.
	 */</font>
	@Override
	<font CLASS=keyword>public</font> IRingElementFactory&lt;F2&gt; getFactory()
	{
		<font CLASS=keyword>return</font> FACTORY;
	}

	<font CLASS=comment>/**
	 * the zero-instance for F2
	 */</font>
	<font CLASS=keyword>public</font> <font CLASS=keytype>static</font> <font CLASS=keyword>final</font> F2 ZERO <font CLASS=symbols>=</font> <font CLASS=keyword>new</font> F2();

	<font CLASS=comment>/**
	 * the one-instance for F2
	 */</font>
	<font CLASS=keyword>public</font> <font CLASS=keytype>static</font> <font CLASS=keyword>final</font> F2 ONE <font CLASS=symbols>=</font> <font CLASS=keyword>new</font> F2();

	<font CLASS=comment>/**
	 * The instance of the singleton factory.
	 */</font>
	<font CLASS=keyword>public</font> <font CLASS=keytype>static</font> F2Factory FACTORY <font CLASS=symbols>=</font> ZERO.<font CLASS=keyword>new</font> F2Factory();

	<font CLASS=comment>/**
	 * The factory class for the F2 data type. Only one instance of this factory
	 * should ever exist.
	 */</font>
	@JLinAlgTypeProperties(isExact <font CLASS=symbols>=</font> <font CLASS=keyword>true</font>, isDiscreet <font CLASS=symbols>=</font> <font CLASS=keyword>true</font>, hasNegativeValues = <font CLASS=keyword>false</font>)
	<font CLASS=keyword>public</font> <font CLASS=keyword>class</font> F2Factory
			<font CLASS=keyword>extends</font>
			RingElementFactory&lt;F2&gt;
	{

		<font CLASS=keyword>private</font> <font CLASS=keytype>static</font> <font CLASS=keyword>final</font> <font CLASS=keytype>long</font> serialVersionUID <font CLASS=symbols>=</font> 1L;

		<font CLASS=comment>/**
		 * create an array to hold &lt;code&gt;size&lt;/code&gt; F2-instances.
		 */</font>
		@Override
		<font CLASS=keyword>public</font> F2[] getArray(<font CLASS=keytype>int</font> size)
		{
			<font CLASS=keyword>return</font> <font CLASS=keyword>new</font> F2[size];
		}

		<font CLASS=comment>/**
		 * @exception InvalidOperationException
		 *                F2-elements can only be obtained for &lt;code&gt;int&lt;/code&gt;
		 *                or &lt;code&gt;long&lt;/code&gt; values.
		 */</font>
		@Override
		<font CLASS=keyword>public</font> F2 get(Object o)
		{
			<font CLASS=keyword>if</font> (o <font CLASS=keyword>instanceof</font> String) {
				String s <font CLASS=symbols>=</font> (String) o;
				<font CLASS=keyword>if</font> (<font CLASS=dblquot>"0m2"</font>.equalsIgnoreCase(s)) <font CLASS=keyword>return</font> ZERO;
				<font CLASS=keyword>if</font> (<font CLASS=dblquot>"1m2"</font>.equalsIgnoreCase(s)) <font CLASS=keyword>return</font> ONE;
				<font CLASS=keyword>try</font> {
					<font CLASS=keytype>int</font> i <font CLASS=symbols>=</font> Integer.parseInt(s);
					<font CLASS=keyword>return</font> get(i);
				} <font CLASS=keyword>catch</font> (NumberFormatException e) {
					<font CLASS=keyword>throw</font> <font CLASS=keyword>new</font> InvalidOperationException(
							s <font CLASS=symbols>+</font> <font CLASS=dblquot>" can not be translated into a F2 element."</font>);
				}
			}
			<font CLASS=keyword>if</font> (o <font CLASS=keyword>instanceof</font> Integer) {
				<font CLASS=keyword>return</font> get(((Integer) o).intValue() &amp; <font CLASS=integer>1</font>);
			}
			<font CLASS=keyword>if</font> (o <font CLASS=keyword>instanceof</font> Long) {
				<font CLASS=keyword>return</font> get(((Long) o).intValue() &amp; <font CLASS=integer>1</font>);
			}
			<font CLASS=comment>// last resort...</font>
			<font CLASS=keyword>return</font> get(o.toString());
		}

		<font CLASS=comment>/**
		 * @return {@link #ZERO} if &lt;code&gt;i%2==0&lt;/code&gt; and {@link #ONE}
		 *         otherwise
		 */</font>
		@Override
		<font CLASS=keyword>public</font> F2 get(<font CLASS=keytype>int</font> i)
		{
			<font CLASS=keyword>if</font> (i % <font CLASS=integer>2</font> <font CLASS=symbols>==</font> <font CLASS=integer>0</font>) <font CLASS=keyword>return</font> ZERO;
			<font CLASS=keyword>return</font> ONE;
		}

		<font CLASS=comment>/**
		 * @exception InvalidOperationException
		 *                F2-elements can only be obtained for &lt;code&gt;int&lt;/code&gt;
		 *                or &lt;code&gt;long&lt;/code&gt; values.
		 */</font>
		@Override
		<font CLASS=keyword>public</font> F2 get(<font CLASS=keytype>double</font> d)
		{
			<font CLASS=keyword>throw</font> <font CLASS=keyword>new</font> InvalidOperationException(
					<font CLASS=dblquot>"Cannot instanciate an F2--element from "</font> <font CLASS=symbols>+</font> d);
		}

		<font CLASS=comment>/**
		 * @return {@link #ONE} as -1 and 1 are identical.
		 */</font>
		@Override
		<font CLASS=keyword>public</font> F2 m_one()
		{
			<font CLASS=keyword>return</font> ONE;
		}

		<font CLASS=comment>/**
		 * @return {@link #ONE}
		 */</font>
		@Override
		<font CLASS=keyword>public</font> F2 one()
		{
			<font CLASS=keyword>return</font> ONE;
		}

		<font CLASS=comment>/**
		 * @return {@link #ZERO} as -1 and 1 are identical.
		 */</font>
		@Override
		<font CLASS=keyword>public</font> F2 zero()
		{
			<font CLASS=keyword>return</font> ZERO;
		}

		<font CLASS=comment>/**
		 * create an array to hold &lt;code&gt;rows&lt;/code&gt; time &lt;code&gt;columns&lt;/code&gt;
		 * F2-instances.
		 */</font>
		@Override
		<font CLASS=keyword>public</font> F2[][] getArray(<font CLASS=keytype>int</font> rows, <font CLASS=keytype>int</font> columns)
		{
			<font CLASS=keyword>return</font> <font CLASS=keyword>new</font> F2[rows][columns];
		}

		<font CLASS=comment>/**
		 * @return {@link #ZERO} if &lt;code&gt;i%2==0&lt;/code&gt; and {@link #ONE}
		 *         otherwise
		 * @see org.jlinalg.IRingElementFactory#get(long)
		 */</font>
		@Override
		<font CLASS=keyword>public</font> F2 get(<font CLASS=keytype>long</font> d)
		{
			<font CLASS=keyword>return</font> (d % 2L) <font CLASS=symbols>==</font> <font CLASS=integer>0</font> ? ZERO : ONE;
		}

		<font CLASS=comment>/**
		 * @return the same as {@link #randomValue()}
		 */</font>
		@Override
		<font CLASS=keyword>public</font> F2 gaussianRandomValue()
		{
			<font CLASS=keyword>return</font> randomValue();
		}

		<font CLASS=comment>/**
		 * @return the same as {@link #randomValue()}. All parameters are
		 *         ignored.
		 */</font>
		@Override
		<font CLASS=keyword>public</font> F2 randomValue(@SuppressWarnings(<font CLASS=dblquot>"unused"</font>) F2 min,
				@SuppressWarnings(<font CLASS=dblquot>"unused"</font>) F2 max)
		{
			<font CLASS=keyword>return</font> randomValue();
		}

		<font CLASS=comment>/**
		 * @return 0 or 1 with equal probability.
		 * @see org.jlinalg.IRingElementFactory#randomValue()
		 */</font>
		@Override
		<font CLASS=keyword>public</font> F2 randomValue()
		{
			<font CLASS=keyword>return</font> random.nextBoolean() ? ONE : ZERO;
		}

	}

	<font CLASS=comment>/**
	 * @return {@code this}
	 * @see org.jlinalg.IRingElement#abs()
	 */</font>
	@Override
	<font CLASS=keyword>public</font> F2 abs()
	{
		<font CLASS=keyword>return</font> <font CLASS=keyword>this</font>;
	}

}



</pre>

</div>


</body>
</html>
